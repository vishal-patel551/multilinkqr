<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Free Multi-Link QR Code Generator â€“ Create One QR for Multiple Links</title>

    <!-- SEO Meta -->
    <meta name="description" content="Free Multi-Link QR Code Generator. Create one QR code that opens multiple HTTPS links at once. Add labels, colors, expiry, auto-open mode and download QR as PNG or SVG. No login needed. Works on all devices.">
    <meta name="keywords" content="qr code generator, multi link qr code, business qr code">
    <meta name="robots" content="index, follow">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="canonical" href="https://www.multilinkqr.com/generator.html" />

    <!-- OpenGraph -->
    <meta property="og:title" content="Free Multi-Link QR Code Generator">
    <meta property="og:description" content="Generate a multi-URL QR that opens multiple links with a single scan. Free, fast and customizable.">
    <meta property="og:image" content="https://www.multilinkqr.com/og-image.png">
    <meta property="og:url" content="https://www.multilinkqr.com/generator.html">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Multi-Link QR Code Generator">
    <meta name="twitter:description" content="Create one QR for multiple URLs â€” free, fast & customizable.">
    <meta name="twitter:image" content="https://www.multilinkqr.com/og-image.png">

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- QR Library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>

    <style>
        body {
            background-color: #f8f9fa;
        }

        .brand-logo {
            font-weight: 700;
            letter-spacing: 0.03em;
        }

        .qr-preview-wrapper {
            display: inline-block;
            padding: 12px;
            border-radius: 12px;
            max-width: 320px; /* keep preview nicely sized */
            width: 100%;
        }

        /* Make the QR canvas responsive inside its box */
        #qrWrapper canvas {
            width: 100% !important;
            height: auto !important;
            display: block;
            margin: 0 auto;
        }

        .with-border {
            border: 2px solid #dee2e6;
        }

        .rounded-pixels canvas {
            border-radius: 8px;
        }

        footer {
            margin-top: 3rem;
            padding: 1.5rem 0;
            background: #ffffff;
            border-top: 1px solid #e5e5e5;
            font-size: 0.9rem;
            color: #6c757d;
        }

        #logoPreview {
            max-width: 80px;
            max-height: 80px;
            margin-top: 0.5rem;
            display: none;
            border-radius: 8px;
        }

        .utm-toggle {
            cursor: pointer;
            font-size: 0.85rem;
        }

        .utm-fields {
            background: #f8f9fa;
            border-radius: 6px;
            padding: 6px 8px;
        }

        .dark-mode {
            background-color: #121212;
            color: #f8f9fa;
        }

            .dark-mode .navbar {
                background-color: #1e1e1e !important;
                border-bottom: 1px solid #333 !important;
            }

                .dark-mode .navbar .nav-link,
                .dark-mode .navbar .navbar-brand {
                    color: #f8f9fa !important;
                }

            .dark-mode .card {
                background-color: #1e1e1e;
                color: #f8f9fa;
                border-color: #333;
            }

            .dark-mode .form-control,
            .dark-mode .form-select {
                background-color: #222;
                color: #f8f9fa;
                border-color: #444;
            }

                .dark-mode .form-control::placeholder {
                    color: #888;
                }

            .dark-mode .form-text {
                color: #b5b5b5;
            }

            .dark-mode footer {
                background-color: #1e1e1e;
                border-top-color: #333;
                color: #b5b5b5;
            }

            .dark-mode a {
                color: #0dcaf0;
            }

            .dark-mode .alert-info {
                background-color: #09354e;
                border-color: #0d4f72;
                color: #e0f3ff;
            }

        .scan-tips {
            font-size: 0.9rem;
            text-align: left;
        }

        .faq-section {
            margin-top: 3rem;
            margin-bottom: 2rem;
        }

            .faq-section h2 {
                font-size: 1.3rem;
                margin-bottom: 1rem;
            }

        .accordion-button:not(.collapsed) {
            box-shadow: none;
        }

        .accordion-item {
            border-radius: 0.5rem;
            overflow: hidden;
            border-color: #e3e6ea;
        }

        .dark-mode .accordion-item {
            border-color: #333;
            background-color: #1e1e1e;
        }

        .dark-mode .accordion-button {
            background-color: #1e1e1e;
            color: #f8f9fa;
        }

        .dark-mode .accordion-body {
            background-color: #1e1e1e;
            color: #f8f9fa;
        }
    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TJ54LBGSDP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-TJ54LBGSDP');
    </script>
    <!-- UNCOMMENT AFTER ADSENSE APPROVAL:
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6077413695680101"
            crossorigin="anonymous"></script>
-->
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-white border-bottom">
        <div class="container">
            <a class="navbar-brand brand-logo" href="index.html">
                <span class="text-primary">Multi</span>LinkQR
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="generator.html">Generate QR</a></li>
                    <li class="nav-item"><a class="nav-link" href="tips.html">QR Tips</a></li>
                    <li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                </ul>
                <button id="themeToggle" type="button" class="btn btn-sm btn-outline-secondary ms-3">
                    ðŸŒ™ Dark
                </button>
            </div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <div class="container py-5">
        <h1 class="h2 text-center mb-4 fw-bold">Free Multi-Link QR Code Generator</h1>

        <p class="text-center mb-5 text-muted">
            MultiLinkQR allows you to create both Single-Link QR Codes (direct redirect to one HTTPS link) and Multi-Link QR Codes (open multiple links or show buttons). Ideal for business cards, social media profiles, marketing, creators, restaurants and professionals. Customize colors, labels, expiry date, and download as PNG or SVG. Completely free and no account needed.
        </p>

        <div class="row g-4">

            <!-- FORM -->
            <div class="col-lg-7">
                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        <h2 class="h4 mb-3">Generate QR Code (Single-Link or Multi-Link)</h2>

                        <div id="alertArea"></div>

                        <form id="qrForm">

                            <!-- LINK MODE -->
                            <div class="mb-3">
                                <label class="fw-semibold">Link Mode</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="linkMode" value="single" id="linkModeSingle">
                                    <label class="form-check-label" for="linkModeSingle">Single Link (Direct redirect)</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="linkMode" value="multi" id="linkModeMulti" checked>
                                    <label class="form-check-label" for="linkModeMulti">Multi-Link (Multiple links)</label>
                                </div>
                            </div>

                            <!-- TITLE -->
                            <div class="mb-3">
                                <label class="fw-semibold">QR Title</label>
                                <input type="text" id="qrTitle" class="form-control" placeholder="Example: My Social Links">
                            </div>

                            <!-- EXPIRY -->
                            <div class="mb-3" id="expirySection">
                                <label class="fw-semibold">Expiry Date (optional)</label>
                                <input type="date" id="qrExpiry" class="form-control">
                            </div>

                            <!-- OPEN MODE -->
                            <div class="mb-3" id="openModeSection">
                                <label class="fw-semibold">Open Mode</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="openMode" value="auto" checked>
                                    <label class="form-check-label">Auto-open all links</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="openMode" value="buttons">
                                    <label class="form-check-label">Show buttons only</label>
                                </div>
                            </div>

                            <!-- STYLE -->
                            <div class="row g-3 mb-3">
                                <div class="col-md-4">
                                    <label class="fw-semibold">Color</label>
                                    <select id="qrColor" class="form-select">
                                        <option value="#000000" selected>Black</option>
                                        <option value="#1a1a1a">Dark Gray</option>
                                        <option value="#444444">Gray</option>
                                        <option value="#ffffff">White</option>

                                        <option value="#0d6efd">Blue</option>
                                        <option value="#6610f2">Purple</option>
                                        <option value="#6f42c1">Indigo</option>
                                        <option value="#d63384">Pink</option>
                                        <option value="#dc3545">Red</option>
                                        <option value="#fd7e14">Orange</option>
                                        <option value="#ffc107">Yellow</option>
                                        <option value="#198754">Green</option>
                                        <option value="#20c997">Teal</option>
                                        <option value="#0dcaf0">Cyan</option>

                                        <option value="#1877F2">Facebook Blue</option>
                                        <option value="#E4405F">Instagram Pink</option>
                                        <option value="#1DA1F2">Twitter Blue</option>
                                        <option value="#0A66C2">LinkedIn Blue</option>
                                        <option value="#FF0000">YouTube Red</option>
                                        <option value="#25D366">WhatsApp Green</option>

                                        <option value="#39FF14">Neon Green</option>
                                        <option value="#FF073A">Neon Red</option>
                                        <option value="#F000FF">Neon Pink</option>
                                        <option value="#00FFFF">Aqua</option>
                                    </select>
                                </div>

                                <div class="col-md-4">
                                    <label class="fw-semibold">Background</label>
                                    <select id="qrBg" class="form-select">
                                        <option value="#ffffff" selected>White</option>
                                        <option value="#f8f9fa">Light Gray</option>
                                        <option value="#000000">Black</option>
                                    </select>
                                </div>

                                <div class="col-md-4">
                                    <label class="fw-semibold">Extras</label>
                                    <div class="form-check">
                                        <input type="checkbox" id="qrBorder" class="form-check-input" checked>
                                        <label class="form-check-label">Show Border</label>
                                    </div>
                                    <div class="form-check">
                                        <input type="checkbox" id="qrRounded" class="form-check-input">
                                        <label class="form-check-label">Rounded Pixels</label>
                                    </div>
                                </div>
                            </div>

                            <!-- QR SIZE -->
                            <div class="mb-3">
                                <label class="fw-semibold">QR Size</label>
                                <select id="qrSize" class="form-select">
                                    <option value="220">Small (screens)</option>
                                    <option value="400" selected>Medium</option>
                                    <option value="800">Large (print)</option>
                                </select>
                                <div class="form-text">
                                    Larger sizes are better for printing and posters. Smaller sizes are fine for on-screen sharing.
                                </div>
                            </div>

                            <!-- LOGO UPLOAD -->
                            <div class="mb-3">
                                <label class="fw-semibold">Logo (optional)</label>
                                <input type="file" id="qrLogo" class="form-control" accept="image/*">
                                <div class="form-text">
                                    Logo will be placed in the center of the QR. Keep it simple and not too large for best scan results.
                                </div>
                                <img id="logoPreview" alt="Logo preview">
                            </div>

                            <!-- SINGLE LINK INPUT -->
                            <div id="singleLinkSection" class="mb-3 d-none">
                                <label class="fw-semibold">Link</label>
                                <input type="text" id="singleLinkUrl" class="form-control" placeholder="https://example.com">
                                <div class="form-text mt-1">Link must start with <strong>https://</strong></div>
                            </div>

                            <!-- MULTI LINKS -->
                            <div id="multiLinksSection">
                                <div class="d-flex justify-content-between mb-2">
                                    <label class="fw-semibold">Links</label>
                                    <button type="button" id="addLink" class="btn btn-outline-secondary btn-sm">+ Add Link</button>
                                </div>

                                <div id="linksContainer"></div>
                                <div class="form-text mb-3">Each link must start with <strong>https://</strong></div>
                            </div>

                            <button class="btn btn-primary w-100">Generate QR Code</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- QR OUTPUT -->
            <div class="col-lg-5">
                <div class="card shadow-sm h-100">
                    <div class="card-body p-4 text-center">

                        <h3 class="h5 mb-3">QR Preview & Download</h3>

                        <div id="noQrMessage" class="alert alert-info">
                            Generate a QR code to see preview here.
                        </div>

                        <div id="qrResult" class="d-none">
                            <div class="fw-semibold mb-2" id="qrTitlePreview"></div>

                            <div id="qrWrapper" class="qr-preview-wrapper with-border mx-auto">
                                <canvas id="qrCanvas"></canvas>
                            </div>

                            <div class="mt-3">
                                <div id="shareableUrlSection">
                                    <label class="fw-semibold">Shareable URL</label>
                                    <input type="text" id="generatedUrl" class="form-control mb-2" readonly>
                                </div>

                                <div class="btn-group mb-3" role="group">
                                    <button type="button" id="copyUrl" class="btn btn-outline-success btn-sm">Copy URL</button>
                                    <button type="button" id="downloadPng" class="btn btn-outline-primary btn-sm">Download PNG</button>
                                    <button type="button" id="downloadSvg" class="btn btn-outline-secondary btn-sm">Download SVG</button>
                                </div>

                                <div id="copyMessage" class="text-success small d-none">Copied!</div>

                                <!-- Scanability Tips -->
                                <div class="scan-tips mt-3 text-start">
                                    <div class="fw-semibold mb-1">Scanability Tips</div>
                                    <ul class="mb-0">
                                        <li>Keep the logo smaller than about 25% of the QR area.</li>
                                        <li>Maintain strong contrast (dark QR code on a light background).</li>
                                        <li>Avoid too much compression when sharing or printing screenshots.</li>
                                        <li>Always test with at least one phone before printing at scale.</li>
                                    </ul>
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

        </div>

        <!-- FAQ SECTION -->
        <div class="faq-section">
            <h2 class="mb-3">FAQ</h2>

            <div class="accordion" id="faqAccordion">
                <div class="accordion-item mb-2">
                    <h2 class="accordion-header" id="faqHeadingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseOne" aria-expanded="false" aria-controls="faqCollapseOne">
                            Can I edit the links later after printing the QR?
                        </button>
                    </h2>
                    <div id="faqCollapseOne" class="accordion-collapse collapse" aria-labelledby="faqHeadingOne" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            This tool creates <strong>static</strong> QR codes. All the information (title, style, links) is encoded directly into the URL inside the QR. Once a QR is printed, youâ€™ll need to generate and reprint a new one if you want to change the links.
                        </div>
                    </div>
                </div>

                <div class="accordion-item mb-2">
                    <h2 class="accordion-header" id="faqHeadingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseTwo" aria-expanded="false" aria-controls="faqCollapseTwo">
                            Is my data stored anywhere?
                        </button>
                    </h2>
                    <div id="faqCollapseTwo" class="accordion-collapse collapse" aria-labelledby="faqHeadingTwo" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            No account is required. Your configuration is packed into the generated URL itself, so the generator doesnâ€™t need a database or login. Anyone with the final URL can open your multi-link page, but thereâ€™s no separate dashboard that stores or manages your projects.
                        </div>
                    </div>
                </div>

                <div class="accordion-item mb-2">
                    <h2 class="accordion-header" id="faqHeadingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseThree" aria-expanded="false" aria-controls="faqCollapseThree">
                            Can I track how many scans I get?
                        </button>
                    </h2>
                    <div id="faqCollapseThree" class="accordion-collapse collapse" aria-labelledby="faqHeadingThree" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            This free version doesnâ€™t include built-in scan tracking. For marketing campaigns, you can still add <strong>UTM parameters</strong> to your links (using the UTM options under each link) and then track the traffic inside tools like Google Analytics or your own analytics platform.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container d-flex flex-wrap justify-content-between align-items-center">
            <div>Â© <span id="yearSpan"></span> MultiLinkQR â€” Multi-Link QR Code Generator</div>
            <div>
                <a href="blog.html" class="me-3">Blog</a>
                <a href="privacy-policy.html" class="me-3">Privacy Policy</a>
                <a href="terms.html" class="me-3">Terms</a>
                <a href="contact.html">Contact</a>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- QR LOGIC -->
    <script>
        const BASE_MULTI_URL = "https://www.multilinkqr.com/multi.html";
        let currentFinalUrl = "";
        let currentLinkMode = "";
        let logoImage = null;

        function showAlert(msg, type = "danger") {
            $("#alertArea").html(`<div class="alert alert-${type}">${msg}</div>`);
        }
        function clearAlert() { $("#alertArea").empty(); }

        function validateHttps(url) {
            return /^https:\/\/.+/i.test(url.trim());
        }

        function buildUrlWithUtm(baseUrl, source, medium, campaign) {
            if (!source && !medium && !campaign) return baseUrl;

            try {
                const urlObj = new URL(baseUrl);
                if (source) urlObj.searchParams.set("utm_source", source);
                if (medium) urlObj.searchParams.set("utm_medium", medium);
                if (campaign) urlObj.searchParams.set("utm_campaign", campaign);
                return urlObj.toString();
            } catch (e) {
                return baseUrl;
            }
        }

        function addLinkRow(url = "", label = "", utmSource = "", utmMedium = "", utmCampaign = "") {
            const idx = $("#linksContainer .link-row").length + 1;
            $("#linksContainer").append(`
                <div class="row g-2 mb-2 link-row">
                    <div class="col-12">
                        <div class="row g-2">
                            <div class="col-md-7">
                                <div class="input-group input-group-sm">
                                    <span class="input-group-text">Link ${idx}</span>
                                    <input type="text" class="form-control link-url" value="${url}" placeholder="https://example.com">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <input type="text" class="form-control form-control-sm link-label" value="${label}" placeholder="Label (Instagram)">
                            </div>
                            <div class="col-md-1 text-end">
                                <button class="btn btn-outline-danger btn-sm remove-link" type="button">&times;</button>
                            </div>
                        </div>
                        <div class="mt-1 d-flex justify-content-between align-items-center">
                            <span class="utm-toggle text-primary">${utmSource || utmMedium || utmCampaign ? "âˆ’ Hide UTM params" : "+ Add UTM params"}</span>
                        </div>
                        <div class="utm-fields mt-1 ${utmSource || utmMedium || utmCampaign ? "" : "d-none"}">
                            <div class="row g-1">
                                <div class="col-md-4">
                                    <input type="text" class="form-control form-control-sm utm-source" placeholder="utm_source" value="${utmSource}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control form-control-sm utm-medium" placeholder="utm_medium" value="${utmMedium}">
                                </div>
                                <div class="col-md-4">
                                    <input type="text" class="form-control form-control-sm utm-campaign" placeholder="utm_campaign" value="${utmCampaign}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `);
        }

        function applyThemeFromStorage() {
            const saved = localStorage.getItem("mlqr_theme");
            const body = document.body;
            const toggleBtn = document.getElementById("themeToggle");

            if (saved === "dark") {
                body.classList.add("dark-mode");
                if (toggleBtn) toggleBtn.textContent = "â˜€ï¸ Light";
            } else {
                body.classList.remove("dark-mode");
                if (toggleBtn) toggleBtn.textContent = "ðŸŒ™ Dark";
            }
        }

        function saveState() {
            try {
                const state = {
                    linkMode: $("input[name='linkMode']:checked").val(),
                    title: $("#qrTitle").val().trim(),
                    expiry: $("#qrExpiry").val(),
                    openMode: $("input[name='openMode']:checked").val(),
                    color: $("#qrColor").val(),
                    bg: $("#qrBg").val(),
                    border: $("#qrBorder").is(":checked"),
                    rounded: $("#qrRounded").is(":checked"),
                    singleLinkUrl: $("#singleLinkUrl").val().trim(),
                    qrSize: $("#qrSize").val(),
                    links: []
                };

                $("#linksContainer .link-row").each(function () {
                    const url = $(this).find(".link-url").val().trim();
                    const label = $(this).find(".link-label").val().trim();
                    const utmSource = $(this).find(".utm-source").val().trim();
                    const utmMedium = $(this).find(".utm-medium").val().trim();
                    const utmCampaign = $(this).find(".utm-campaign").val().trim();

                    if (!url && !label && !utmSource && !utmMedium && !utmCampaign) return;

                    state.links.push({
                        url,
                        label,
                        utmSource,
                        utmMedium,
                        utmCampaign
                    });
                });

                localStorage.setItem("mlqr_state", JSON.stringify(state));
            } catch (e) {
                console.warn("Failed to save state", e);
            }
        }

        function restoreState() {
            const raw = localStorage.getItem("mlqr_state");
            if (!raw) {
                addLinkRow("https://instagram.com/", "Instagram");
                addLinkRow("https://www.linkedin.com/", "LinkedIn");
                return;
            }

            try {
                const state = JSON.parse(raw);

                if (state.linkMode === "single") {
                    $("#linkModeSingle").prop("checked", true);
                } else {
                    $("#linkModeMulti").prop("checked", true);
                }

                $("#qrTitle").val(state.title || "");
                $("#qrExpiry").val(state.expiry || "");

                if (state.openMode === "buttons") {
                    $("input[name='openMode'][value='buttons']").prop("checked", true);
                } else {
                    $("input[name='openMode'][value='auto']").prop("checked", true);
                }

                if (state.color) $("#qrColor").val(state.color);
                if (state.bg) $("#qrBg").val(state.bg);
                $("#qrBorder").prop("checked", !!state.border);
                $("#qrRounded").prop("checked", !!state.rounded);
                $("#singleLinkUrl").val(state.singleLinkUrl || "");
                if (state.qrSize) $("#qrSize").val(state.qrSize);

                $("#linksContainer").empty();
                if (Array.isArray(state.links) && state.links.length > 0) {
                    state.links.forEach(l => {
                        addLinkRow(
                            l.url || "",
                            l.label || "",
                            l.utmSource || "",
                            l.utmMedium || "",
                            l.utmCampaign || ""
                        );
                    });
                } else {
                    addLinkRow("https://instagram.com/", "Instagram");
                    addLinkRow("https://www.linkedin.com/", "LinkedIn");
                }

                $("input[name='linkMode']:checked").trigger("change");

            } catch (e) {
                console.warn("Failed to restore state", e);
                addLinkRow("https://instagram.com/", "Instagram");
                addLinkRow("https://www.linkedin.com/", "LinkedIn");
            }
        }

        $(function () {
            $("#yearSpan").text(new Date().getFullYear());

            applyThemeFromStorage();
            $("#themeToggle").on("click", function () {
                const body = document.body;
                body.classList.toggle("dark-mode");
                const isDark = body.classList.contains("dark-mode");
                this.textContent = isDark ? "â˜€ï¸ Light" : "ðŸŒ™ Dark";
                localStorage.setItem("mlqr_theme", isDark ? "dark" : "light");
            });

            restoreState();

            $("#qrLogo").on("change", function (e) {
                const file = e.target.files[0];
                const preview = document.getElementById("logoPreview");

                if (!file) {
                    logoImage = null;
                    preview.style.display = "none";
                    preview.src = "";
                    return;
                }

                const reader = new FileReader();
                reader.onload = function (evt) {
                    const img = new Image();
                    img.onload = function () {
                        logoImage = img;
                        preview.src = img.src;
                        preview.style.display = "block";
                    };
                    img.src = evt.target.result;
                };
                reader.readAsDataURL(file);
            });

            $("input[name='linkMode']").change(function() {
                const mode = $(this).val();
                if (mode === "single") {
                    $("#singleLinkSection").removeClass("d-none");
                    $("#multiLinksSection").addClass("d-none");
                    $("#expirySection").addClass("d-none");
                    $("#openModeSection").addClass("d-none");
                } else {
                    $("#singleLinkSection").addClass("d-none");
                    $("#multiLinksSection").removeClass("d-none");
                    $("#expirySection").removeClass("d-none");
                    $("#openModeSection").removeClass("d-none");
                }
                $("#noQrMessage").removeClass("d-none");
                $("#qrResult").addClass("d-none");
                $("#copyUrl").parent().removeClass("d-none");
                clearAlert();
                saveState();
            });

            $("#addLink").click(() => {
                addLinkRow();
                saveState();
            });

            $("#linksContainer").on("click", ".remove-link", function () {
                $(this).closest(".link-row").remove();
                saveState();
            });

            $("#linksContainer").on("click", ".utm-toggle", function () {
                const fields = $(this).closest(".row").nextAll(".utm-fields").first();
                fields.toggleClass("d-none");
                if (fields.hasClass("d-none")) {
                    $(this).text("+ Add UTM params");
                } else {
                    $(this).text("âˆ’ Hide UTM params");
                }
                saveState();
            });

            $("#qrTitle, #qrExpiry, #qrColor, #qrBg, #qrBorder, #qrRounded, #singleLinkUrl, #qrSize")
                .on("input change", saveState);
            $("input[name='openMode']").on("change", saveState);
            $("#linksContainer").on("input change", ".link-url, .link-label, .utm-source, .utm-medium, .utm-campaign", saveState);

            $("#qrForm").submit(function (e) {
                e.preventDefault();
                clearAlert();

                const linkMode = $("input[name='linkMode']:checked").val();
                const title = $("#qrTitle").val().trim();
                const color = $("#qrColor").val();
                const bg = $("#qrBg").val();
                const border = $("#qrBorder").is(":checked");
                const rounded = $("#qrRounded").is(":checked");
                const size = parseInt($("#qrSize").val(), 10) || 220;

                let finalUrl;
                let qrTitleText;

                currentLinkMode = linkMode;

                if (linkMode === "single") {
                    const singleUrl = $("#singleLinkUrl").val().trim();
                    if (!singleUrl) {
                        showAlert("Please enter a link.");
                        return;
                    }
                    if (!validateHttps(singleUrl)) {
                        showAlert("Invalid link. Link must start with https://");
                        return;
                    }
                    finalUrl = singleUrl;
                    currentFinalUrl = finalUrl;
                    qrTitleText = title || "Your QR Code";
                    $("#shareableUrlSection").addClass("d-none");
                    $("#copyUrl").parent().addClass("d-none");
                } else {
                    const expiry = $("#qrExpiry").val();
                    const mode = $("input[name='openMode']:checked").val();

                    const links = [];
                    let invalid = false;

                    $("#linksContainer .link-row").each(function () {
                        const urlInput = $(this).find(".link-url").val().trim();
                        const label = $(this).find(".link-label").val().trim();
                        const utmSource = $(this).find(".utm-source").val().trim();
                        const utmMedium = $(this).find(".utm-medium").val().trim();
                        const utmCampaign = $(this).find(".utm-campaign").val().trim();

                        if (!urlInput) return;

                        if (!validateHttps(urlInput)) {
                            showAlert("Invalid link: " + urlInput);
                            invalid = true;
                            return false;
                        }

                        const finalLinkUrl = buildUrlWithUtm(urlInput, utmSource, utmMedium, utmCampaign);
                        links.push({ url: finalLinkUrl, label: label || null });
                    });

                    if (invalid) return;

                    if (links.length === 0) {
                        showAlert("Add at least one HTTPS link.");
                        return;
                    }

                    let exp = null;
                    if (expiry) {
                        const d = new Date(expiry + "T23:59:59");
                        if (!isNaN(d.getTime())) exp = d.getTime();
                    }

                    const payload = {
                        title: title || null,
                        exp,
                        mode,
                        style: { color, bg, border, rounded },
                        links
                    };

                    const encoded = btoa(unescape(encodeURIComponent(JSON.stringify(payload))));
                    finalUrl = BASE_MULTI_URL + "?d=" + encodeURIComponent(encoded);
                    currentFinalUrl = finalUrl;
                    qrTitleText = title || "Your MultiLinkQR Code";
                    $("#shareableUrlSection").removeClass("d-none");
                    $("#copyUrl").parent().removeClass("d-none");
                    $("#generatedUrl").val(finalUrl);
                }

                saveState();

                $("#qrTitlePreview").text(qrTitleText);
                $("#noQrMessage").addClass("d-none");
                $("#qrResult").removeClass("d-none");

                $("#qrWrapper").css("background-color", bg);
                $("#qrWrapper").toggleClass("with-border", border);
                $("#qrWrapper").toggleClass("rounded-pixels", rounded);

                const canvas = document.getElementById("qrCanvas");

                QRCode.toCanvas(canvas, finalUrl, {
                    width: size,
                    margin: 2,
                    scale: 1,
                    color: {
                        dark: color || "#000000",
                        light: bg || "#ffffff"
                    }
                }, function (err) {
                    if (err) {
                        console.error(err);
                        return;
                    }

                    if (logoImage) {
                        const ctx = canvas.getContext("2d");
                        const canvasSize = canvas.width;

                        const logoSize = canvasSize * 0.22;
                        const x = (canvasSize - logoSize) / 2;
                        const y = (canvasSize - logoSize) / 2;

                        ctx.fillStyle = bg || "#ffffff";
                        ctx.fillRect(x, y, logoSize, logoSize);

                        ctx.drawImage(logoImage, x, y, logoSize, logoSize);
                    }
                });

                $("#downloadPng").off().click(function () {
                    const a = document.createElement("a");
                    a.download = (title || "multilinkqr") + ".png";
                    a.href = canvas.toDataURL("image/png");
                    a.click();
                });

                $("#downloadSvg").off().click(function () {
                    QRCode.toString(finalUrl, { type: "svg" }, function (err, svg) {
                        if (err) {
                            console.error(err);
                            return;
                        }
                        const blob = new Blob([svg], { type: "image/svg+xml" });
                        const url = URL.createObjectURL(blob);
                        const a = document.createElement("a");
                        a.href = url;
                        a.download = "multilinkqr.svg";
                        a.click();
                        URL.revokeObjectURL(url);
                    });
                });

                $("#copyUrl").off().on("click", function () {
                    const text = currentLinkMode === "single" ? currentFinalUrl : $("#generatedUrl").val();
                    navigator.clipboard.writeText(text).then(() => {
                        $("#copyMessage").removeClass("d-none");
                        setTimeout(() => {
                            $("#copyMessage").addClass("d-none");
                        }, 1500);
                    }).catch(() => {
                        alert("Copy failed. Please copy manually.");
                    });
                });

            });
        });
    </script>

    <!-- Cookie Consent Banner -->
    <div id="cookieConsent" style="display:none; position:fixed; bottom:0; left:0; right:0; background:#1a1a2e; color:#fff; padding:1rem 1.5rem; z-index:9999; box-shadow:0 -2px 10px rgba(0,0,0,0.2);">
        <div class="container d-flex flex-wrap justify-content-between align-items-center gap-3">
            <div style="flex:1; min-width:200px;">
                <strong>Cookie Notice:</strong> We use cookies to analyze website traffic and optimize your experience. By continuing to use our site, you consent to our use of cookies.
                <a href="privacy-policy.html" style="color:#0dcaf0;">Learn more</a>
            </div>
            <div class="d-flex gap-2">
                <button id="acceptCookies" class="btn btn-primary btn-sm">Accept All</button>
                <button id="rejectCookies" class="btn btn-outline-light btn-sm">Reject Non-Essential</button>
            </div>
        </div>
    </div>
    <script>
        (function() {
            var consent = localStorage.getItem('cookieConsent');
            if (!consent) {
                document.getElementById('cookieConsent').style.display = 'block';
            }
            document.getElementById('acceptCookies').addEventListener('click', function() {
                localStorage.setItem('cookieConsent', 'accepted');
                document.getElementById('cookieConsent').style.display = 'none';
            });
            document.getElementById('rejectCookies').addEventListener('click', function() {
                localStorage.setItem('cookieConsent', 'rejected');
                document.getElementById('cookieConsent').style.display = 'none';
                window['ga-disable-G-TJ54LBGSDP'] = true;
            });
        })();
    </script>

</body>
</html>
